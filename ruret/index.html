<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚¢ãƒ—ãƒª</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: linear-gradient(135deg, #f0f4ff, #ffffff);
  margin: 0;
  padding: 20px;
  text-align: center;
}

h1 {
  margin-bottom: 10px;
}

#result {
  font-size: 28px;
  font-weight: bold;
  margin: 20px 0;
  min-height: 40px;
}

.input-area {
  margin-bottom: 10px;
}

.input-area input {
  padding: 10px;
  width: 65%;
  font-size: 16px;
}

.input-area button {
  padding: 10px 15px;
  font-size: 16px;
  margin-left: 5px;
  cursor: pointer;
}

#itemList {
  max-width: 400px;
  margin: 10px auto 20px;
  text-align: left;
}

.item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f5f5f5;
  padding: 8px 10px;
  margin-bottom: 5px;
  border-radius: 6px;
}

.item button {
  background: #ff5c5c;
  color: white;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
  border-radius: 4px;
}

#wheel-container {
  position: relative;
  width: 300px;
  height: 300px;
  margin: 20px auto;
}

#wheel {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 6px solid #333;
  transition: transform 3s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.pointer {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 12px solid transparent;
  border-right: 12px solid transparent;
  border-bottom: 20px solid red;
}

#spin {
  margin-top: 20px;
  padding: 12px 25px;
  font-size: 18px;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>ğŸ¯ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>

<div id="result">çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>

<div class="input-area">
  <input id="itemInput" type="text" placeholder="å†…å®¹ã‚’å…¥åŠ›">
  <button onclick="addItem()">è¿½åŠ </button>
</div>

<div id="itemList"></div>

<div id="wheel-container">
  <div class="pointer"></div>
  <canvas id="wheel" width="300" height="300"></canvas>
</div>

<button id="spin" onclick="spin()">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã™</button>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const resultEl = document.getElementById("result");
const itemListEl = document.getElementById("itemList");

let items = [];
let angle = 0;

function addItem() {
  const input = document.getElementById("itemInput");
  if (!input.value) return;

  items.push(input.value);
  input.value = "";
  renderList();
  drawWheel();
}

function removeItem(index) {
  items.splice(index, 1);
  renderList();
  drawWheel();
}

function renderList() {
  itemListEl.innerHTML = "";
  items.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "item";

    div.innerHTML = `
      <span>${item}</span>
      <button onclick="removeItem(${index})">å‰Šé™¤</button>
    `;

    itemListEl.appendChild(div);
  });
}

function drawWheel() {
  const size = canvas.width;
  const center = size / 2;
  const radius = center;
  ctx.clearRect(0, 0, size, size);

  if (items.length === 0) return;

  const slice = (2 * Math.PI) / items.length;

  items.forEach((text, i) => {
    const start = i * slice;
    const end = start + slice;

    ctx.beginPath();
    ctx.moveTo(center, center);
    ctx.arc(center, center, radius, start, end);
    ctx.closePath();
    ctx.fillStyle = `hsl(${i * (360 / items.length)}, 80%, 65%)`;
    ctx.fill();

    ctx.save();
    ctx.translate(center, center);
    ctx.rotate(start + slice / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#000";
    ctx.font = "16px sans-serif";
    ctx.fillText(text, radius - 10, 5);
    ctx.restore();
  });
}

function spin() {
  if (items.length === 0) return;

  const spinAngle = Math.random() * 360 + 1440;
  angle += spinAngle;
  canvas.style.transform = `rotate(${angle}deg)`;

  setTimeout(() => {
    const slice = 360 / items.length;
    const normalized = (360 - (angle % 360)) % 360;
    const index = Math.floor(normalized / slice);
    resultEl.textContent = "ğŸ‰ çµæœ: " + items[index];
  }, 3000);
}

drawWheel();
</script>

</body>
</html>
